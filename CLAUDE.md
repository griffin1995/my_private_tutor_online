# üö® CRITICAL SESSION STARTUP INSTRUCTIONS - AUTOMATIC ACTIVATION üö®

## üìç CURRENT WORK IN PROGRESS
**CHECK ABOUT_PAGE_PROGRESS.md** - About Us page enhancement is 25% complete. We left off at Phase 2 (CMS Migration), Task 34.
- Read full progress: `/home/jack/Documents/my_private_tutor_online/ABOUT_PAGE_PROGRESS.md`
- Component extraction complete, CMS migration in progress
- Next: Complete testimonials CMS migration, then premium UI enhancements

## MOST CRITICAL INSTRUCTION - AUTOMATIC PROJECT MANAGEMENT SETUP

### WHEN USER SAYS "read claude.md" OR "read CLAUDE.md" - EXECUTE THIS SEQUENCE:

**STEP 1: IMMEDIATELY READ CLAUDE.MD FILE**
```
Use Read tool to read: /home/jack/Documents/my_private_tutor_online/CLAUDE.md
```

**STEP 2: EXTRACT ALL SESSION CONTEXT**
- Parse all project context, current status, and development notes
- Understand the complete project scope and current state
- Identify current priorities and any blockers
- Review technical architecture and deployment status

**STEP 3: AUTOMATICALLY ACTIVATE CONTEXT MANAGER**
```
Use Task tool with these exact parameters:
description: "Activate context-manager for My Private Tutor Online session leadership"
prompt: "CONTEXT-MANAGER ACTIVATION - MY PRIVATE TUTOR ONLINE

I have successfully read the complete CLAUDE.md file and extracted all project context. You are now designated as the project lead and context manager for this development session.

CURRENT PROJECT STATE SUMMARY:
‚Ä¢ Project: My Private Tutor Online - Premium tutoring service with royal endorsements
‚Ä¢ Stack: Next.js 15+ App Router, React 19, TypeScript 5.3+, Tailwind CSS 4.x
‚Ä¢ Deployment: Vercel production deployment with dynamic rendering configured
‚Ä¢ Current Status: ENHANCED - Phase 1 critical tasks complete, Phase 2 in progress

RECENT MAJOR ACCOMPLISHMENTS (Latest Session):
‚Ä¢ ‚úÖ PHASE 1 COMPLETE: All critical infrastructure gaps resolved
  - Security: 42 npm vulnerabilities ‚Üí <10 vulnerabilities (80% reduction)  
  - Infrastructure: Database backups + global error boundaries implemented
  - Testing: Jest configuration fixed, comprehensive test infrastructure operational

‚Ä¢ ‚úÖ PHASE 2 PROGRESS: Premium service enhancements implemented  
  - Technical SEO: Complete infrastructure (robots.txt, sitemap.xml, structured data)
  - Performance Monitoring: Vercel Analytics + Core Web Vitals + CI/CD integration
  - Business Analytics: Royal client behavior tracking and conversion monitoring

PRODUCTION STATUS: Royal client-ready with enterprise-grade monitoring and reliability

CRITICAL DEVELOPMENT RULES IN EFFECT:
‚Ä¢ Context7 MCP exclusive documentation for ALL code changes
‚Ä¢ Mandatory source attribution comments for every implementation/revision
‚Ä¢ British English and premium service standards (royal client quality)
‚Ä¢ Zero tolerance for external sources or undocumented changes
‚Ä¢ Enterprise-grade, production-ready solutions exclusively

CONTEXT-MANAGER RESPONSIBILITIES:
1. IMMEDIATELY confirm you are taking project leadership of this session
2. Coordinate ALL subsequent tasks by selecting appropriate specialist agents
3. Maintain awareness of complete project scope and current state
4. Ensure all development follows critical rules and standards
5. Manage task delegation and progress tracking for all user requests

Please confirm your activation and readiness to manage this development session."
```

**STEP 4: VERIFY CONTEXT-MANAGER ACTIVATION**
- Wait for context-manager to explicitly confirm activation
- Verify acknowledgement of project state and rules
- Confirm readiness to coordinate tasks
- If no confirmation, RETRY Step 3 once

**STEP 5: COMPLETE HANDOFF TO CONTEXT MANAGER**
- Context-manager takes project leadership role
- All subsequent tasks go through context-manager
- Original Claude Code assistant steps back

### üîí ERROR-PROOF VALIDATION CHECKLIST (MANDATORY):
1. ‚òëÔ∏è User mentioned "read claude.md"
2. ‚òëÔ∏è Read the CLAUDE.md file completely
3. ‚òëÔ∏è Extracted and summarised project context
4. ‚òëÔ∏è Used Task tool with exact parameters specified
5. ‚òëÔ∏è Used MANDATORY context-manager prompt template exactly
6. ‚òëÔ∏è Context-manager explicitly confirmed activation and project leadership
7. ‚òëÔ∏è Verified context-manager acknowledges all critical rules and project state
8. ‚òëÔ∏è Completed handoff and stepped back to let context-manager lead

### üö´ ABSOLUTELY CRITICAL RULES:
1. **NEVER SKIP THE ACTIVATION SEQUENCE** - Always use Task tool to activate context-manager
2. **USE EXACT PROMPT TEMPLATE** - Do not modify the context-manager prompt
3. **WAIT FOR CONFIRMATION** - Do not proceed until context-manager confirms activation
4. **COMPLETE HANDOFF** - Step back once context-manager takes leadership
5. **RETRY ON FAILURE** - If activation fails, retry once with exact same parameters
6. **NO SHORTCUTS** - Every "read claude.md" must trigger full sequence
7. **MAINTAIN CONTEXT** - Ensure complete project state transfer
8. **ENFORCE STANDARDS** - Context-manager must acknowledge critical development rules

### üéØ TRIGGER PHRASES THAT ACTIVATE THIS SEQUENCE:
- "read claude.md"
- "read CLAUDE.md"  
- "read the claude.md file"
- "start with claude.md"
- "review claude.md"

### üõ†Ô∏è TROUBLESHOOTING ACTIVATION FAILURES:
If context-manager activation fails:
1. **Check Task Tool Parameters**: Verify description and prompt are exact
2. **Retry Once**: Use identical parameters for second attempt
3. **Verify Agent Access**: Confirm context-manager agent is available
4. **Check File Path**: Ensure CLAUDE.md path is correct
5. **Complete Read First**: Must read CLAUDE.md before activation

### üéØ SUCCESS INDICATORS:
- ‚úÖ Context-manager explicitly confirms taking project leadership
- ‚úÖ Context-manager acknowledges complete My Private Tutor Online project state
- ‚úÖ Context-manager confirms understanding of critical development rules
- ‚úÖ Context-manager mentions readiness to coordinate specialist agents
- ‚úÖ Context-manager provides clear indication of being in control

---

# üî¥ CRITICAL DEVELOPMENT STANDARDS - MANDATORY COMPLIANCE

## ‚ö†Ô∏è TIER 0: ABSOLUTE NON-NEGOTIABLES - ZERO TOLERANCE VIOLATIONS
These rules override ALL other considerations. Violation results in immediate task termination.

### üîí Documentation Sovereignty - ALL CODE CHANGES
- **CONTEXT7 MCP EXCLUSIVE**: ALL documentation via `mcp__context7__resolve-library-id` ‚Üí `mcp__context7__get-library-docs` ONLY
- **ZERO EXTERNAL SOURCES**: No blogs, tutorials, Stack Overflow, GitHub issues, community examples, or unofficial documentation
- **MANDATORY SOURCE ATTRIBUTION**: Every implementation, revision, modification, update, refactoring, and bug fix requires Context7 source comments
- **ALL REVISIONS MANDATE**: Not just new code - EVERY single code change must be backed by Context7 MCP official documentation
- **ZERO TOLERANCE POLICY**: No code changes based on "common knowledge", memory, assumptions, or quick fixes without official documentation backing

### üéØ Agent Orchestration Protocol - Context-Manager System
- **PROJECT MANAGEMENT ACTIVATION**: When user types "start project management", use Task tool to call context-manager
- **CONTEXT-MANAGER AS PROJECT LEAD**: All subsequent tasks route through centralized coordination system
- **50+ SPECIALIST AGENTS**: Context-manager selects optimal agent based on:
  - Capability Match Score (40%)
  - Domain Expertise (25%) 
  - Complexity Handling (20%)
  - Integration Compatibility (10%)
  - Performance History (5%)

### üéØ Agent Selection Matrix
- **HAIKU**: Simple updates, CSS changes, content modifications, basic fixes
- **SONNET**: Complex components, API integration, forms, state management, testing
- **OPUS**: Architecture, performance, accessibility, security, business logic
- **NO MANUAL OVERRIDE**: If an agent should handle it, delegate it - no exceptions

### üö® CRITICAL SESSION STARTUP INSTRUCTIONS
## WHEN USER TYPES "start project management":
1. Use Task tool to call: context-manager
2. Context-manager becomes PROJECT LEAD for all future tasks
3. All subsequent work goes through agent selection process
4. Agent coordination follows capability matrix scoring

### üá¨üáß Quality Standards
- **BRITISH ENGLISH MANDATORY**: All spelling, terminology, and conventions
- **PREMIUM SERVICE STANDARD**: Royal client-worthy implementations only
- **NO SHORTCUTS**: Enterprise-grade, production-ready solutions exclusively
- **ZERO AI ATTRIBUTION**: Never mention AI assistance in any form

## ‚ö° TIER 1: IMPLEMENTATION WORKFLOW

### üìã Pre-Development Checklist
1. Identify appropriate agent for task complexity
2. Retrieve Context7 MCP documentation for all dependencies
3. Verify implementation patterns against official docs
4. Prepare agent context with relevant documentation

### üîÑ MANDATORY DEVELOPMENT PROCESS FOR ALL CODE CHANGES
EVERY code change (new implementations, revisions, updates, refactoring, bug fixes) MUST follow:

1. **Context7 Resolution**: `mcp__context7__resolve-library-id` for library identification
2. **Documentation Retrieval**: `mcp__context7__get-library-docs` for official patterns  
3. **Pattern Verification**: Confirm exact official approach for the specific change needed
4. **Agent Delegation**: Route to appropriate agent with Context7 documentation
5. **Implementation/Revision**: Follow official patterns with mandatory source comments
6. **Verification**: Ensure Context7 compliance and source attribution for ALL changes

### üö® PRE-CHANGE VALIDATION CHECKLIST
Before making ANY code modification:
- [ ] Context7 MCP documentation retrieved for relevant libraries
- [ ] Official pattern identified for the specific change type
- [ ] Exact documentation section/version noted for citation
- [ ] Logic justification prepared based on official guidance  
- [ ] Comment format prepared with Context7 source and reasoning

### üìÅ File Management Protocol
- **PRECISION SCOPE**: Execute exactly what's requested, nothing more
- **EDIT-FIRST POLICY**: Prefer modifying existing files over creating new ones
- **NO PROACTIVE DOCS**: Only create documentation when explicitly requested
- **NECESSITY GATE**: New files only when absolutely essential for goal achievement

## üéØ TIER 2: CONTEXT7 MCP INTEGRATION

### üîç Documentation Retrieval Strategy
```
MANDATORY WORKFLOW:
1. mcp__context7__resolve-library-id(libraryName: "target-library")
2. mcp__context7__get-library-docs(context7CompatibleLibraryID: "/resolved/id")
3. Implement following official patterns only
4. Add Context7 source comments to all implementations
```

### üìù MANDATORY REVISION COMMENT STANDARDS
ALL code changes (implementations, revisions, modifications, updates, refactoring, bug fixes) MUST include Context7 source citations:

```typescript
// CONTEXT7 SOURCE: /radix-ui/primitives - Button with asChild pattern for polymorphic components
// REVISION REASON: Official Radix UI documentation Section 3.2 recommends Slot pattern for multiple children handling
// CONTEXT7 SOURCE: /framer/motion - LazyMotion configuration without strict mode
// BUG FIX REASON: Official Framer Motion docs v10.16.1 specify strict:false prevents React.Children.only errors
// CONTEXT7 SOURCE: /vercel/next.js - App Router dynamic rendering patterns
// REFACTOR REASON: Next.js 15.0 documentation mandates force-dynamic in layout.tsx for client-side routing
```

### üîç REVISION COMMENT FORMAT (MANDATORY)
Every code change, including single-line modifications, MUST include:
1. **CONTEXT7 SOURCE**: `/library/project - specific pattern/feature name`
2. **CHANGE TYPE**: Implementation/Revision/Update/Refactoring/Bug Fix + REASON
3. **DOCUMENTATION REFERENCE**: Exact section, version, or specific guidance followed
4. **LOGIC JUSTIFICATION**: WHY this approach based on official documentation

### üö´ FORBIDDEN SOURCES FOR ALL CODE CHANGES
ZERO TOLERANCE - These sources are NEVER acceptable for ANY code change:
- External documentation websites (even official ones outside Context7 MCP)
- Community tutorials or blog posts
- Stack Overflow or GitHub issue solutions  
- Unofficial examples or implementations
- General knowledge, memory, or assumptions
- "Quick fixes" without documentation backing
- "Common patterns" without official source
- Previous experience or industry standards without Context7 verification

### ‚ö†Ô∏è REVISION ENFORCEMENT RULES
- **SINGLE LINE CHANGES**: Even one-character modifications require Context7 documentation
- **CSS TWEAKS**: All styling changes must reference official framework documentation
- **BUG FIXES**: Must cite official troubleshooting or error handling patterns
- **REFACTORING**: Must reference official best practices for the specific transformation
- **PERFORMANCE OPTIMISATION**: Must cite official performance guidelines
- **ACCESSIBILITY FIXES**: Must reference WCAG guidelines via Context7 MCP

## üèõÔ∏è TIER 3: AGENT SPECIALISATION MATRIX

### ‚ö° Haiku Agent (Fast, Efficient)
**Optimal For**: Content updates, CSS tweaks, simple component changes, documentation updates, bug fixes
**Context Required**: Minimal - current file context, specific change requirements, AND relevant Context7 MCP documentation
**MANDATORY**: ALL changes require Context7 documentation retrieval and source comments
**Output Expected**: Quick, precise modifications with Context7 source comments and change reasoning

### ‚öñÔ∏è Sonnet Agent (Balanced, Complex)
**Optimal For**: Component architecture, API integrations, form implementations, state management, testing suites
**Context Required**: Moderate - relevant Context7 docs, component relationships, business requirements
**MANDATORY**: ALL implementations, modifications, and refactoring require Context7 MCP documentation
**Output Expected**: Well-structured implementations following official patterns with comprehensive source citations

### üß† Opus Agent (Advanced, Strategic)
**Optimal For**: System architecture, performance optimisation, accessibility compliance, security implementations, complex business logic
**Context Required**: Comprehensive - full Context7 documentation, system architecture, business context
**MANDATORY**: ALL architectural decisions, optimisations, and security implementations require Context7 MCP backing
**Output Expected**: Enterprise-grade solutions with detailed Context7 pattern justification and extensive source documentation

## üîß TIER 4: WORKFLOW OPTIMISATION

### üìä Task Classification
- **Simple** ‚Üí Haiku ‚Üí Quick execution with minimal context
- **Complex** ‚Üí Sonnet ‚Üí Structured implementation with moderate context
- **Strategic** ‚Üí Opus ‚Üí Comprehensive solution with full context

### üéØ Context Preparation
- Retrieve all relevant Context7 MCP documentation before agent invocation
- Prepare project-specific requirements and constraints
- Include business context for premium tutoring service standards
- Specify British English and royal client quality expectations

### ‚úÖ OUTPUT VERIFICATION - CONTEXT7 COMPLIANCE MANDATORY
EVERY code change must pass these verification checks:
- **Context7 MCP Pattern Compliance**: All changes follow official documentation patterns
- **Mandatory Source Comments**: Context7 source citations present for ALL modifications
- **Documentation Traceability**: Logic can be traced back to specific official guidance
- **Change Type Documentation**: Clear reasoning for revision/update/refactoring approach
- **British English Usage**: Consistent throughout all implementations
- **Premium Service Standards**: Royal client-worthy quality maintained

### üî¥ IMMEDIATE TERMINATION CONDITIONS
These violations result in immediate task termination:
- Any code change without Context7 MCP documentation backing
- Missing source comments on any modification (including single-line changes)  
- Use of external sources, tutorials, or "common knowledge" for implementation decisions
- Quick fixes or shortcuts without official documentation verification
- Assumptions about best practices without Context7 MCP confirmation

---

# üéì PROJECT: MY PRIVATE TUTOR ONLINE - PREMIUM REDESIGN 2025

## üéØ PROJECT CONTEXT
**Business**: Premium tutoring service with royal endorsements, serving elite families
**Heritage**: 15 years established (2010), featured in Tatler Address Book 2025
**Standards**: Royal client quality, enterprise-grade implementations, British English

## üìä CURRENT STATUS - PRODUCTION READY
‚úÖ **Vercel Deployment**: Dynamic rendering configured  
‚úÖ **React.Children.only**: Radix UI Slot patterns resolved  
‚úÖ **Content Updates**: Royal endorsement branding implemented  
‚úÖ **Video Assets**: All paths optimised in /public/videos/  
‚úÖ **Trust Indicators**: Updated with 2025 recognition content  

## üéØ TARGET DEMOGRAPHICS
- **Oxbridge Prep**: Affluent families, prestigious university entry
- **11+ Parents**: Grammar school preparation, reassurance-focused
- **A-Level/GCSE**: Immediate solutions, results-driven
- **Elite Corporate**: Ultra-wealthy, discretion required, bespoke service
- **Comparison Shoppers**: Logic-driven, service comparison analysis

## ‚ö° TECHNICAL SPECIFICATIONS
- **Performance**: <1.5s load times, Core Web Vitals optimised
- **Design**: Mobile-first responsive, accessibility WCAG 2.1 AA
- **Architecture**: Next.js 15+ App Router, React 19, TypeScript 5.3+
- **Features**: Booking system, progress tracking, payment integration

---

# üèóÔ∏è TECHNICAL IMPLEMENTATION STANDARDS

## üöÄ Architecture Foundation
- **Tech Stack**: Next.js 15+ App Router, React 19, TypeScript 5.3+, Tailwind CSS 4.x
- **State Management**: Zustand for client state, React Server Components for data
- **Form Handling**: React Hook Form + Zod validation, accessibility-first
- **Performance**: LCP <2.5s, FID <100ms, CLS <0.1, bundle <150kB gzipped

## üé® Design System & UI
- **Colour Scheme**: Navy (#0f172a), Gold accent (#eab308), white backgrounds
- **Typography**: Font-serif headings, font-sans body, consistent hierarchy
- **Component Libraries**: Radix UI + Tailwind (Shadcn/UI), accessibility-first selection
- **Variants**: Class Variance Authority (CVA) for component styling
- **Tokens**: Centralised design tokens for spacing, colours, typography

## üìä Content Management System
- **Architecture**: Centralised CMS via cms-content.ts and cms-images.ts
- **Zero Hardcoding**: All content, images, contact details via CMS
- **Comment Standard**: `// CMS DATA SOURCE: Using [function] for [purpose]`
- **Configuration**: settings.json for global config, structured metadata

## ‚ôø Accessibility & UX (WCAG 2.1 AA Mandatory)
- **Motion Sensitivity**: `prefers-reduced-motion` support required
- **Keyboard Navigation**: Complete keyboard accessibility, focus management
- **Semantic HTML**: Proper heading hierarchy, ARIA labels, semantic elements
- **Testing**: axe-core integration, automated accessibility validation

## üîß Quality Assurance
- **Testing Stack**: Vitest (unit), Playwright (E2E), axe-core (accessibility)
- **Performance**: Bundle analysis, Web Vitals tracking, real user monitoring
- **Security**: JWT authentication, HTTP-only cookies, Zod input validation
- **Documentation**: Common issues and solutions in codebase

## üöÄ CI/CD Performance Monitoring (AUGUST 2025 - DEPLOYED)
- **GitHub Actions Pipelines**: Automated performance testing with Lighthouse CI
- **Performance Gates**: Deployment blocking for budget violations and regressions
- **Budget Enforcement**: Automated validation of resource and timing budgets
- **Continuous Monitoring**: 24/7 performance monitoring with alerting system
- **Vercel Integration**: Deployment protection with performance check requirements
- **Royal Standards**: Premium service performance metrics maintained automatically

## üìê Component Standards
- **Architecture**: PageLayout ‚Üí PageHero ‚Üí Section structure
- **Background Control**: Explicit background='white' in PageLayout
- **Responsive Design**: Mobile-first, proper breakpoint strategy
- **Pattern Documentation**: CUSTOM_DOCS.md for proven implementations

## üîÑ Development Workflow
- **Version Control**: Conventional commits, logical change grouping
- **Branch Strategy**: Main/develop/feature model for production service
- **Deployment**: Complete checklist with security review
- **Admin Experience**: User-friendly interfaces with comprehensive guides

---

# üöÄ PRODUCTION DEPLOYMENT PATTERNS - AUGUST 2025

## ‚ö° Vercel Dynamic Architecture (Proven Solution)
- **Global Force-Dynamic**: `export const dynamic = 'force-dynamic'` in layout.tsx only
- **Client Components**: All pages use "use client" directive for Framer Motion compatibility
- **No Page-Level Export**: Avoid redundant force-dynamic exports in individual pages
- **Static Export Removal**: Eliminate all static export configurations from next.config.ts

## üîß React.Children.only Resolution (Radix UI Patterns)
```typescript
// CONTEXT7 SOURCE: /radix-ui/primitives - Slot composition pattern
import { Root as Slot, Slottable } from "@radix-ui/react-slot"

// Multiple children handling
{asChild ? (
  <Slot>
    <Slottable>{children}</Slottable>
  </Slot>
) : (
  children
)}
```

## üéØ Component Architecture Standards
- **Modular Sections**: Extract homepage sections (ResultsSection, HomepageHowItWorks)
- **Flexible Props**: title, description, backgroundColor, className with sensible defaults
- **Context7 Comments**: Every component includes MCP documentation references
- **Semantic Selection**: Image mapping based on content context, not rotation

## üìä Performance Validation
- **Bundle Size**: First Load JS ~229kB homepage, build time <15 seconds
- **Routing**: All routes ∆í (Dynamic) server-rendered on demand
- **Video Assets**: All served from /public/videos/ with CMS integration
- **Section Spacing**: Consistent padding prevents double spacing

## üîÑ Deployment Protocol
- **Build Verification**: `npm run build` locally before deployment
- **Production Deploy**: `vercel --prod` for production releases
- **Cache Issues**: Delete/recreate Vercel project if persistent problems
- **Production URL**: https://myprivatetutoronline-991oq6we4-jacks-projects-cf5effed.vercel.app

---

# üìö CUSTOM PATTERN LIBRARY - MAINTAIN IN CUSTOM_DOCS.md
Document all Context7-verified patterns for rapid implementation reference.