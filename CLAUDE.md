# 🚨 CRITICAL SESSION STARTUP INSTRUCTIONS - AUTOMATIC ACTIVATION 🚨

## 📍 PROJECT STATUS: MY PRIVATE TUTOR ONLINE ✅
**CURRENT STATUS**: Production Enhanced - Phase 2 Complete with Video Masterclasses
- **Achievement**: £400,000+ revenue opportunity FULLY REALIZED + Enhanced Video Content System
- **Quality**: Royal client-worthy, enterprise-grade implementation with premium visual enhancements
- **Build Status**: 91 optimized routes, <25s build time, all dependencies resolved
- **Recovery Status**: Homepage fully operational with synchronous CMS patterns - 558ms load times verified
- **Latest Enhancement**: Video masterclasses with gradient effects and professional backgrounds

## MOST CRITICAL INSTRUCTION - AUTOMATIC PROJECT MANAGEMENT SETUP

### WHEN USER SAYS "read claude.md" OR "read CLAUDE.md" - EXECUTE THIS SEQUENCE:

**STEP 1: IMMEDIATELY READ CLAUDE.MD FILE**
```
Use Read tool to read: /home/jack/Documents/my_private_tutor_online/CLAUDE.md
```

**STEP 2: EXTRACT ALL SESSION CONTEXT**
- Parse all project context, current status, and development notes
- Understand the complete project scope and current state
- Identify current priorities and any blockers
- Review technical architecture and deployment status

**STEP 3: AUTOMATICALLY ACTIVATE CONTEXT MANAGER**
```
Use Task tool with these exact parameters:
description: "Activate context-manager for My Private Tutor Online session leadership"
prompt: "CONTEXT-MANAGER ACTIVATION - MY PRIVATE TUTOR ONLINE

I have successfully read the complete CLAUDE.md file and extracted all project context. You are now designated as the project lead and context manager for this development session.

CURRENT PROJECT STATE SUMMARY:
• Project: My Private Tutor Online - Premium tutoring service with royal endorsements
• Stack: Next.js 15.3.4 App Router, React 19, TypeScript 5.8+, Tailwind CSS 3.4+
• Deployment: Vercel production deployment with dynamic rendering configured
• Current Status: ENHANCED - Phase 1 critical tasks complete, Phase 2 in progress

RECENT MAJOR ACCOMPLISHMENTS (September 2025 - Latest Sessions):
• ✅ VIDEO MASTERCLASSES COMPLETE: Professional video content system implemented
  - Background Gradients: Corner-based gradient effects for 11+ bootcamp pages
  - Video CMS: COMPREHENSIVE_VIDEO_CMS.ts with darkened images and optimized backgrounds
  - Testimonials Enhancement: Square borders with gold hover effects on components
  - Performance Optimization: Sharp-based image processing with 30% brightness reduction
  - Professional Backgrounds: Web-optimized JPEG with progressive loading

• ✅ REVISIONS.MD & REVISIONS2.MD COMPLETE: 13 critical enhancement tasks delivered
  - Subject Tuition Page: Complete overhaul with proper section ordering and nested dropdown navigation
  - Navigation System: Enhanced with hover dropdowns and comprehensive submenu structure
  - Blog Page: Professional under-construction design with premium branding  
  - Image Management: 30 client photos integrated with proper CMS organization and kebab-case naming
  - Homepage Restoration: Form and About section restored with proper component ordering
  - Tier Layout: How It Works page redesigned with spotlight Tier 1 central design
  - Admin Dashboard: Comprehensive audit completed showing 85% operational status

• ✅ TECHNICAL INFRASTRUCTURE: Enterprise-grade foundation maintained
  - React 19: Full compatibility achieved with all dependencies updated
  - Build Optimization: 91 routes generated successfully in <25 seconds
  - Performance: Bundle size optimized (~229kB first load JS)
  - Security: All authentication and error handling systems operational

PRODUCTION STATUS: Royal client-ready with enhanced UX, comprehensive image integration, and premium functionality

CRITICAL DEVELOPMENT RULES IN EFFECT:
• Context7 MCP exclusive documentation for ALL code changes
• Mandatory source attribution comments for every implementation/revision
• British English and premium service standards (royal client quality)
• Zero tolerance for external sources or undocumented changes
• Enterprise-grade, production-ready solutions exclusively

CONTEXT-MANAGER RESPONSIBILITIES:
1. IMMEDIATELY confirm you are taking project leadership of this session
2. Coordinate ALL subsequent tasks by selecting appropriate specialist agents
3. Maintain awareness of complete project scope and current state
4. Ensure all development follows critical rules and standards
5. Manage task delegation and progress tracking for all user requests

Please confirm your activation and readiness to manage this development session."
```

**STEP 4: VERIFY CONTEXT-MANAGER ACTIVATION**
- Wait for context-manager to explicitly confirm activation
- Verify acknowledgement of project state and rules
- Confirm readiness to coordinate tasks
- If no confirmation, RETRY Step 3 once

**STEP 5: COMPLETE HANDOFF TO CONTEXT MANAGER**
- Context-manager takes project leadership role
- All subsequent tasks go through context-manager
- Original Claude Code assistant steps back

### 🔒 ERROR-PROOF VALIDATION CHECKLIST (MANDATORY):
1. ☑️ User mentioned "read claude.md"
2. ☑️ Read the CLAUDE.md file completely
3. ☑️ Extracted and summarised project context
4. ☑️ Used Task tool with exact parameters specified
5. ☑️ Used MANDATORY context-manager prompt template exactly
6. ☑️ Context-manager explicitly confirmed activation and project leadership
7. ☑️ Verified context-manager acknowledges all critical rules and project state
8. ☑️ Completed handoff and stepped back to let context-manager lead

### 🚫 ABSOLUTELY CRITICAL RULES:
1. **NEVER SKIP THE ACTIVATION SEQUENCE** - Always use Task tool to activate context-manager
2. **USE EXACT PROMPT TEMPLATE** - Do not modify the context-manager prompt
3. **WAIT FOR CONFIRMATION** - Do not proceed until context-manager confirms activation
4. **COMPLETE HANDOFF** - Step back once context-manager takes leadership
5. **RETRY ON FAILURE** - If activation fails, retry once with exact same parameters
6. **NO SHORTCUTS** - Every "read claude.md" must trigger full sequence
7. **MAINTAIN CONTEXT** - Ensure complete project state transfer
8. **ENFORCE STANDARDS** - Context-manager must acknowledge critical development rules

### 🎯 TRIGGER PHRASES THAT ACTIVATE THIS SEQUENCE:
- "read claude.md"
- "read CLAUDE.md"  
- "read the claude.md file"
- "start with claude.md"
- "review claude.md"

### 🛠️ TROUBLESHOOTING ACTIVATION FAILURES:
If context-manager activation fails:
1. **Check Task Tool Parameters**: Verify description and prompt are exact
2. **Retry Once**: Use identical parameters for second attempt
3. **Verify Agent Access**: Confirm context-manager agent is available
4. **Check File Path**: Ensure CLAUDE.md path is correct
5. **Complete Read First**: Must read CLAUDE.md before activation

### 🎯 SUCCESS INDICATORS:
- ✅ Context-manager explicitly confirms taking project leadership
- ✅ Context-manager acknowledges complete My Private Tutor Online project state
- ✅ Context-manager confirms understanding of critical development rules
- ✅ Context-manager mentions readiness to coordinate specialist agents
- ✅ Context-manager provides clear indication of being in control

---

# 🔴 CRITICAL DEVELOPMENT STANDARDS - MANDATORY COMPLIANCE

## ⚠️ TIER 0: ABSOLUTE NON-NEGOTIABLES - ZERO TOLERANCE VIOLATIONS
These rules override ALL other considerations. Violation results in immediate task termination.

### 🔒 Documentation Sovereignty - ALL CODE CHANGES
- **CONTEXT7 MCP EXCLUSIVE**: ALL documentation via `mcp__context7__resolve-library-id` → `mcp__context7__get-library-docs` ONLY
- **ZERO EXTERNAL SOURCES**: No blogs, tutorials, Stack Overflow, GitHub issues, community examples, or unofficial documentation
- **MANDATORY SOURCE ATTRIBUTION**: Every implementation, revision, modification, update, refactoring, and bug fix requires Context7 source comments
- **ALL REVISIONS MANDATE**: Not just new code - EVERY single code change must be backed by Context7 MCP official documentation
- **ZERO TOLERANCE POLICY**: No code changes based on "common knowledge", memory, assumptions, or quick fixes without official documentation backing

### 🎯 Agent Orchestration Protocol - Context-Manager System
- **PROJECT MANAGEMENT ACTIVATION**: When user types "start project management", use Task tool to call context-manager
- **CONTEXT-MANAGER AS PROJECT LEAD**: All subsequent tasks route through centralized coordination system
- **50+ SPECIALIST AGENTS**: Context-manager selects optimal agent based on:
  - Capability Match Score (40%)
  - Domain Expertise (25%) 
  - Complexity Handling (20%)
  - Integration Compatibility (10%)
  - Performance History (5%)

### 🎯 Agent Selection Matrix
- **HAIKU**: Simple updates, CSS changes, content modifications, basic fixes
- **SONNET**: Complex components, API integration, forms, state management, testing
- **OPUS**: Architecture, performance, accessibility, security, business logic
- **NO MANUAL OVERRIDE**: If an agent should handle it, delegate it - no exceptions

### 🚨 CRITICAL SESSION STARTUP INSTRUCTIONS
## WHEN USER TYPES "start project management":
1. Use Task tool to call: context-manager
2. Context-manager becomes PROJECT LEAD for all future tasks
3. All subsequent work goes through agent selection process
4. Agent coordination follows capability matrix scoring

### 🇬🇧 Quality Standards
- **BRITISH ENGLISH MANDATORY**: All spelling, terminology, and conventions
- **PREMIUM SERVICE STANDARD**: Royal client-worthy implementations only
- **NO SHORTCUTS**: Enterprise-grade, production-ready solutions exclusively
- **ZERO AI ATTRIBUTION**: Never mention AI assistance in any form

## 🚨 CRITICAL: SYNCHRONOUS CMS ARCHITECTURE - NEVER DEVIATE

**HOMEPAGE RECOVERY LESSONS**: Critical failure in August 2025 caused by async CMS patterns - NEVER REPEAT
**ZERO TOLERANCE VIOLATIONS**: Any deviation from synchronous patterns causes complete homepage failure

### 🔒 MANDATORY CMS PATTERNS

**✅ WORKING SYNCHRONOUS PATTERN:**
```typescript
// CONTEXT7 SOURCE: /typescript/handbook - Direct JSON imports for static content
import cmsContent from '../../content/cms-content.json';

export const getCMSContent = (): CMSContentType => {
  return cmsContent; // MANDATORY: Synchronous return
};

const content = getCMSContent(); // Direct function call without loading states
```

**❌ FORBIDDEN ASYNC PATTERNS:**
```typescript
// These patterns caused complete homepage failure:
export const loadCachedContent = async (): Promise<any> => { /* FORBIDDEN */ }
const [content, setContent] = useState(null); // FORBIDDEN FOR STATIC DATA
useEffect(() => { loadContent() }, []); // FORBIDDEN FOR CMS DATA
```

### 🚫 FAILURE SYMPTOMS
- Loading spinners that never resolve
- ".map is not a function" errors
- Missing homepage sections
- useState/useEffect for static JSON content

### 🎯 ARCHITECTURE RULES
1. **Direct JSON imports only** - No dynamic loading
2. **Synchronous functions exclusively** - No Promise returns
3. **No loading states for static content** - Immediate availability required
4. **No useEffect for CMS data** - Direct function calls only

## ⚡ TIER 1: IMPLEMENTATION WORKFLOW

### 📋 Pre-Development Checklist
1. Identify appropriate agent for task complexity
2. Retrieve Context7 MCP documentation for all dependencies
3. Verify implementation patterns against official docs
4. Prepare agent context with relevant documentation

### 🔄 CONTEXT7 MCP MANDATORY WORKFLOW
EVERY code change MUST follow this process:

1. **Documentation Retrieval**: `mcp__context7__resolve-library-id` → `mcp__context7__get-library-docs`
2. **Pattern Verification**: Confirm exact official approach for the specific change
3. **Implementation**: Follow official patterns with mandatory source comments
4. **Verification**: Ensure Context7 compliance and source attribution

### 📝 MANDATORY COMMENT STANDARDS
ALL code changes MUST include Context7 source citations:
```typescript
// CONTEXT7 SOURCE: /radix-ui/primitives - Button with asChild pattern
// REVISION REASON: Official Radix UI documentation Section 3.2 pattern
```

**Comment Format Requirements:**
1. **CONTEXT7 SOURCE**: `/library/project - specific pattern/feature name`
2. **CHANGE TYPE**: Implementation/Revision/Update/Refactoring/Bug Fix + REASON

### 🚫 FORBIDDEN SOURCES (ZERO TOLERANCE)
- External documentation websites (even official ones outside Context7 MCP)
- Community tutorials, blog posts, Stack Overflow, GitHub issues
- "Quick fixes" without documentation backing
- General knowledge, memory, or assumptions

### 📁 File Management Protocol
- **EDIT-FIRST POLICY**: Prefer modifying existing files over creating new ones
- **NO PROACTIVE DOCS**: Only create documentation when explicitly requested
- **NECESSITY GATE**: New files only when absolutely essential

## ⚠️ REVISION ENFORCEMENT RULES
- **SINGLE LINE CHANGES**: Even one-character modifications require Context7 documentation
- **ALL CHANGE TYPES**: CSS tweaks, bug fixes, refactoring, performance optimisation, accessibility fixes ALL require official documentation backing

## 🏛️ TIER 3: AGENT SPECIALISATION MATRIX

### ⚡ Haiku Agent (Fast, Efficient)
**Optimal For**: Content updates, CSS tweaks, simple component changes, documentation updates, bug fixes
**Context Required**: Minimal - current file context, specific change requirements, AND relevant Context7 MCP documentation
**MANDATORY**: ALL changes require Context7 documentation retrieval and source comments
**Output Expected**: Quick, precise modifications with Context7 source comments and change reasoning

### ⚖️ Sonnet Agent (Balanced, Complex)
**Optimal For**: Component architecture, API integrations, form implementations, state management, testing suites
**Context Required**: Moderate - relevant Context7 docs, component relationships, business requirements
**MANDATORY**: ALL implementations, modifications, and refactoring require Context7 MCP documentation
**Output Expected**: Well-structured implementations following official patterns with comprehensive source citations

### 🧠 Opus Agent (Advanced, Strategic)
**Optimal For**: System architecture, performance optimisation, accessibility compliance, security implementations, complex business logic
**Context Required**: Comprehensive - full Context7 documentation, system architecture, business context
**MANDATORY**: ALL architectural decisions, optimisations, and security implementations require Context7 MCP backing
**Output Expected**: Enterprise-grade solutions with detailed Context7 pattern justification and extensive source documentation

## 🔧 TIER 4: WORKFLOW OPTIMISATION

### 📊 Task Classification
- **Simple** → Haiku → Quick execution with minimal context
- **Complex** → Sonnet → Structured implementation with moderate context
- **Strategic** → Opus → Comprehensive solution with full context

### 🎯 Context Preparation
- Retrieve all relevant Context7 MCP documentation before agent invocation
- Prepare project-specific requirements and constraints
- Include business context for premium tutoring service standards
- Specify British English and royal client quality expectations

### ✅ OUTPUT VERIFICATION - CONTEXT7 COMPLIANCE MANDATORY
EVERY code change must pass these verification checks:
- **Context7 MCP Pattern Compliance**: All changes follow official documentation patterns
- **Mandatory Source Comments**: Context7 source citations present for ALL modifications
- **Documentation Traceability**: Logic can be traced back to specific official guidance
- **Change Type Documentation**: Clear reasoning for revision/update/refactoring approach
- **British English Usage**: Consistent throughout all implementations
- **Premium Service Standards**: Royal client-worthy quality maintained

### 🔴 IMMEDIATE TERMINATION CONDITIONS
These violations result in immediate task termination:
- Any code change without Context7 MCP documentation backing
- Missing source comments on any modification (including single-line changes)  
- Use of external sources, tutorials, or "common knowledge" for implementation decisions
- Quick fixes or shortcuts without official documentation verification
- Assumptions about best practices without Context7 MCP confirmation
- **ANY ASYNC CMS PATTERNS**: Promise-based functions, useState/useEffect for static content
- **ANY FORBIDDEN ARCHITECTURAL PATTERNS**: Dynamic imports, loading states for JSON data
- **ANY HOMEPAGE FAILURE INDICATORS**: Loading spinners that don't resolve, missing content sections

---

# 🎓 PROJECT: MY PRIVATE TUTOR ONLINE - PREMIUM REDESIGN 2025

## 🎯 PROJECT CONTEXT
**Business**: Premium tutoring service with royal endorsements, serving elite families
**Heritage**: 15 years established (2010), featured in Tatler Address Book 2025
**Standards**: Royal client quality, enterprise-grade implementations, British English

## 📊 PRODUCTION SPECIFICATIONS
- **Tech Stack**: Next.js 15.3.4 App Router, React 19, TypeScript 5.8+, Tailwind CSS 3.4.1
- **Performance**: <1.5s load times, 229kB first load JS, 91 optimized routes, <25s build time
- **Architecture**: SYNCHRONOUS CMS MANDATORY - Centralised via cms-content.ts and cms-images.ts
- **Deployment**: Vercel dynamic rendering with force-dynamic in layout.tsx
- **Features**: Booking system, progress tracking, payment integration, admin dashboard (85% operational), video masterclasses with gradient effects
- **Quality**: WCAG 2.1 AA accessibility, royal client standards, British English

## 🎯 TARGET DEMOGRAPHICS
- **Oxbridge Prep**: Affluent families, prestigious university entry
- **11+ Parents**: Grammar school preparation, reassurance-focused
- **A-Level/GCSE**: Immediate solutions, results-driven
- **Elite Corporate**: Ultra-wealthy, discretion required, bespoke service

## 🚀 DEPLOYMENT PATTERNS
- **Vercel Architecture**: `export const dynamic = 'force-dynamic'` in layout.tsx only
- **Client Components**: All pages use "use client" directive for Framer Motion compatibility
- **React.Children.only Resolution**: Use Radix UI Slot patterns for multiple children handling
- **Component Standards**: Modular sections with synchronous data access only
- **Build Verification**: `npm run build` locally + CMS synchronous verification before deployment
- **Production URL**: https://myprivatetutoronline-f8tv06oa2-jacks-projects-cf5effed.vercel.app

## 🚑 EMERGENCY HOMEPAGE RECOVERY PROTOCOL
**IF HOMEPAGE LOADING FAILURES OCCUR:**

### 🔄 IMMEDIATE DIAGNOSIS
1. Check for `async` keywords in CMS functions
2. Look for `useState`/`useEffect` for static content
3. Verify ".map is not a function" errors
4. Confirm missing homepage sections

### ⚙️ RECOVERY STEPS
1. **Convert CMS functions to synchronous**: Remove all `async`/`Promise<>` patterns
2. **Replace dynamic imports**: Use direct JSON imports only
3. **Eliminate loading states**: Remove useState/useEffect for static content
4. **Test immediate data availability**: Verify all sections load without spinners

**REMEMBER**: The synchronous CMS architecture is PROVEN WORKING. Any deviation risks complete homepage failure.

---

# 📚 CUSTOM PATTERN LIBRARY - MAINTAIN IN CUSTOM_DOCS.md
Document all Context7-verified patterns for rapid implementation reference.